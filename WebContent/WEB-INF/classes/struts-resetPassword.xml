<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
    <package name="resetPassword" namespace="/resetPassword" extends="default">
        <result-types>
            <result-type name="tiles"
                class="org.apache.struts2.views.tiles.TilesResult" />
        </result-types>
        
        <interceptors>
            <interceptor name="ResetPasswordInterceptor"
                class="com.ibm.opum.resetPasswordInterceptor.action.ResetPasswordInterceptor" />
            <interceptor-stack name="resetPasswordStack">
                <interceptor-ref name="defaultStack" />
                <interceptor-ref name="ResetPasswordInterceptor" />
            </interceptor-stack>
        </interceptors>

		<action name="resetPasswordLink" method="validateToken"
			class="com.ibm.opum.util.action.ResetPasswordAction">
			<result name="validateTokenLink" type="tiles">resetPasswordLink</result>
		</action>
		
		<action name="validateResetPasswordLink" method="resetPassword"
			class="com.ibm.opum.util.action.ResetPasswordAction">
			<interceptor-ref name="resetPasswordStack" />
			<result name="passwordMismatch" type="redirectAction">
				<param name="actionName">resetPasswordLink</param>
				<param name="email">${email}</param>
				<param name="token">${token}</param>
			</result>
 			<result name="login" type="redirectAction">../login/loginLink</result>
 		</action>
		
    </package>
</struts>